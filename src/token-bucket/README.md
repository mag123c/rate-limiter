### Token Bucket
지정된 토큰 개수만큼만 처리할 수 있는 방식으로 사전 설정된 양의 토큰이 주기적으로 채워진다. `버킷의 크기`보다 초과하여 채워지지는 않는다.

<img width="875" height="558" alt="image" src="https://github.com/user-attachments/assets/94907c59-91c2-439b-bd1a-9aaa5ef794fb" />


특징:
- `공급률`: 토큰은 일정 주기만큼 채워지는 비율을 정해서, 주기마다 해당 양 만큼 채워진다.
- 요청은 요청에 필요한 토큰 개수만큼 사용되며, 토큰 개수가 모자라다면 429를 반환한다.
- 구현이 쉽다. (단순 K:V 형태의 버킷 관리)
- 메모리 사용 측면에서 효율적이다. (100만 개의 Map이 16MB 정도 밖에 되지 않음)
    - 메모리를 더 절약하기 위해 Key의 길이 최적화를 위해 특정 바이트 크기로 제한한 단방향 해싱을 사용할 수 있다.
    - 혹은 Key 압축도 사용해볼 수 있다. (Key의 규칙을 이용한 압축, 예를 들어 API Endpoint를 라벨링)
- 최적의 값을 찾는 것이 어려워 A/B 테스트로 계속 최적의 값을 찾아야한다. 
- 엄격한 제한: 정상 사용자도 차단 / 느슨한 제한: 서버 과부하 위험
